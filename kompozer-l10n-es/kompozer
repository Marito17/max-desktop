#!/bin/bash

launch_es_install() {
	zenity --info --text="Es la primera vez que ejecuta KompoZer.\n\nA continuación se instalará la traducción en español.\n\nReinicie KompoZer para poder usarlo en español."
	kompozer.real /usr/share/kompozer-l10n-es/kpz-langpack-esES.xpi
}


# read kompozer dir
if [ ! -d $HOME/.kompozer.net ]; then
  launch_es_install
  exit 0
fi

# extension is in temp/ and in next boot is installed
if [ -d $HOME/.kompozer.net/kompozer/*default/extensions/temp ]; then
  kompozer.real "$@"
  exit 0
fi

# jar not exists
if [ ! -e $HOME/.kompozer.net/kompozer/*default/extensions/langpack-es-ES*/chrome/es-ES.jar ]; then
  launch_es_install
  exit 0
fi


# es_ES installed run kompozer.real
kompozer.real "$@"
exit 0
